{"ast":null,"code":"import _slicedToArray from \"/home/cadu/Driven/Projetos/Projeto_11_Linkr/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/cadu/Driven/Projetos/Projeto_11_Linkr/src/components/pages/login/Login.js\",\n    _s = $RefreshSig$();\n\nimport { Container, BoxLogo, BoxText, BoxInput, ButtonSign, InputRegister } from \"../../shared/LoginRegisterStyle\";\nimport UserContext from \"../../../contexts/UserContext\";\nimport { useContext, useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport { login } from \"../../../service/API\";\nimport Swal from \"sweetalert2\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Login() {\n  _s();\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      senha = _useState4[0],\n      setSenha = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useContext = useContext(UserContext),\n      setUser = _useContext.setUser;\n\n  var history = useHistory();\n\n  function Logar(e) {\n    e.preventDefault();\n    setLoading(true);\n    var body = {\n      email: email,\n      password: senha\n    };\n    login(body).then(LoginSucess).catch(Erro);\n  }\n\n  function LoginSucess(res) {\n    setUser(res.data);\n    localStorage.setItem('@user', JSON.stringify(res.data));\n    history.push(\"/timeline\");\n  }\n\n  function Erro(res) {\n    var statusCode = res.response.status;\n\n    if (statusCode === 403) {\n      Swal.fire({\n        icon: \"error\",\n        title: \"Ops...\",\n        text: \"Email ou senha incorretos\"\n      });\n    } else if (statusCode === 500) {\n      Swal.fire({\n        icon: \"error\",\n        title: \"Ops...\",\n        text: \"Não foi possível realizar o login neste momento\"\n      });\n    }\n\n    setLoading(false);\n  }\n\n  useEffect(function () {\n    var userData = localStorage.getItem('@user');\n\n    if (userData) {\n      var FoundUserData = JSON.parse(userData);\n      setUser(FoundUserData);\n      history.push(\"/timeline\");\n    }\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(BoxLogo, {\n      children: /*#__PURE__*/_jsxDEV(BoxText, {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"linkr\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"save, share and discover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"the best links on the web\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 12\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 8\n    }, this), /*#__PURE__*/_jsxDEV(BoxInput, {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: Logar,\n        children: [/*#__PURE__*/_jsxDEV(InputRegister, {\n          type: \"email\",\n          placeholder: \"e-mail\",\n          value: email,\n          onChange: function onChange(e) {\n            return setEmail(e.target.value);\n          },\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(InputRegister, {\n          type: \"password\",\n          placeholder: \"password\",\n          value: senha,\n          onChange: function onChange(e) {\n            return setSenha(e.target.value);\n          },\n          required: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 12\n        }, this), /*#__PURE__*/_jsxDEV(ButtonSign, {\n          disabled: loading,\n          type: \"submit\",\n          children: \"Log in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 12\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/sign-up\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"First time? Create an account!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 8\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Login, \"ZcOCQDiEkZ//4YbYVD244mQfzd8=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/home/cadu/Driven/Projetos/Projeto_11_Linkr/src/components/pages/login/Login.js"],"names":["Container","BoxLogo","BoxText","BoxInput","ButtonSign","InputRegister","UserContext","useContext","useState","useEffect","useHistory","Link","login","Swal","Login","email","setEmail","senha","setSenha","loading","setLoading","setUser","history","Logar","e","preventDefault","body","password","then","LoginSucess","catch","Erro","res","data","localStorage","setItem","JSON","stringify","push","statusCode","response","status","fire","icon","title","text","userData","getItem","FoundUserData","parse","target","value"],"mappings":"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","sourcesContent":["import {Container,BoxLogo,BoxText,BoxInput,ButtonSign,InputRegister} from \"../../shared/LoginRegisterStyle\";\nimport UserContext from \"../../../contexts/UserContext\";\nimport { useContext, useState,useEffect } from \"react\";\nimport { useHistory } from \"react-router\";\nimport { Link } from \"react-router-dom\";\nimport { login } from \"../../../service/API\";\nimport Swal from \"sweetalert2\";\n\nexport default function Login(){\n    const [email,setEmail] = useState(\"\");\n    const [senha,setSenha] = useState(\"\");\n    const [loading,setLoading] = useState(false);\n    const { setUser } = useContext(UserContext); \n    let history = useHistory();\n\n    function Logar(e){\n        e.preventDefault();\n        setLoading(true);\n        const body = {\n            email: email,\n            password:senha,\n        }\n        login(body)\n            .then(LoginSucess)\n            .catch(Erro);\n    }\n\n    function LoginSucess(res){\n        setUser(res.data);\n        localStorage.setItem('@user',JSON.stringify(res.data));\n        history.push(\"/timeline\")\n    }\n    function Erro(res){\n        const statusCode = res.response.status\n        if(statusCode === 403){\n            Swal.fire({\n                icon: \"error\",\n                title: \"Ops...\",\n                text: \"Email ou senha incorretos\"\n            })\n        }\n        else if (statusCode === 500) {\n            Swal.fire({\n                icon: \"error\",\n                title: \"Ops...\",\n                text: \"Não foi possível realizar o login neste momento\"\n            })\n        }\n        setLoading(false);\n    }\n\n    useEffect(() =>{\n        const userData = localStorage.getItem('@user');\n        if(userData){\n            const FoundUserData = JSON.parse(userData);\n            setUser(FoundUserData);\n            history.push(\"/timeline\");\n        }\n    },[]);  // eslint-disable-line react-hooks/exhaustive-deps\n\n\n\n    return(\n    <Container>\n       <BoxLogo>\n        <BoxText>\n           <h1>linkr</h1>\n           <h2>save, share and discover</h2>\n           <h2>the best links on the web</h2>\n        </BoxText>\n       </BoxLogo>\n       <BoxInput>\n        <form onSubmit={Logar}>\n           <InputRegister type=\"email\" placeholder=\"e-mail\" value={email} onChange={(e)=> setEmail(e.target.value)} required></InputRegister>\n           <InputRegister type=\"password\" placeholder=\"password\" value={senha} onChange={(e)=> setSenha(e.target.value)} required></InputRegister>\n           <ButtonSign disabled={loading} type=\"submit\">Log in</ButtonSign>\n        </form>\n        <Link to=\"/sign-up\">\n           <span>First time? Create an account!</span>\n        </Link>\n       </BoxInput>\n    </Container>\n    );\n}"]},"metadata":{},"sourceType":"module"}