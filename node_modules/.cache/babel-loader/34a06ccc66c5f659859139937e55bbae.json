{"ast":null,"code":"import _slicedToArray from \"/home/cadu/Driven/Projetos/Projeto_11_Linkr/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"/home/cadu/Driven/Projetos/Projeto_11_Linkr/src/components/shared/UserPost.js\",\n    _s = $RefreshSig$();\n\nimport { Link, useLocation } from 'react-router-dom';\nimport { FiTrash } from \"react-icons/fi\";\nimport { AiOutlineHeart, AiFillHeart, AiOutlineComment } from 'react-icons/ai';\nimport { ContainerUserPost, BoxModal, ModalTitle, ModalConfirm, ModalCancel, HashtagCSS, Interaction, EditBox, MainContent, BoxFrame } from './ContainerUserPost';\nimport ReactModal from 'react-modal';\nimport { deletePost, getPosts, getUserPosts } from '../../service/API';\nimport { toggleLike, editPost } from '../../service/API';\nimport UserContext from '../../contexts/UserContext';\nimport ReactTooltip from 'react-tooltip';\nimport { TiPencil } from 'react-icons/ti';\nimport { useEffect, useContext, useRef, useState } from 'react';\nimport { RepostButton, RepostedDiv } from './Repost';\nimport Swal from 'sweetalert2';\nimport getYouTubeID from 'get-youtube-id';\nimport DefaultImg from '../../assets/default.jpg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function UserPost(props) {\n  _s();\n\n  var location = useLocation();\n  var _props$post = props.post,\n      id = _props$post.id,\n      linkTitle = _props$post.linkTitle,\n      text = _props$post.text,\n      linkImage = _props$post.linkImage,\n      linkDescription = _props$post.linkDescription,\n      likes = _props$post.likes,\n      repostedBy = _props$post.repostedBy,\n      repostCount = _props$post.repostCount;\n  var link = props.post.link;\n\n  function checkYoutubeLink(url) {\n    var YoutubePattern = /^(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?$/;\n\n    if (url.match(YoutubePattern)) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  var userInfo = props.userInfo,\n      userId = props.userId,\n      setPosts = props.setPosts,\n      posts = props.posts;\n\n  var _useContext = useContext(UserContext),\n      user = _useContext.user;\n\n  var _useState = useState(''),\n      _useState2 = _slicedToArray(_useState, 2),\n      tooltipMessage = _useState2[0],\n      setTooltipMessage = _useState2[1];\n\n  var _useState3 = useState(likes.some(function (like) {\n    return like.userId === user.user.id;\n  })),\n      _useState4 = _slicedToArray(_useState3, 2),\n      liked = _useState4[0],\n      setLiked = _useState4[1];\n\n  var _useState5 = useState(likes),\n      _useState6 = _slicedToArray(_useState5, 2),\n      postLikes = _useState6[0],\n      setPostLikes = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      myPost = _useState8[0],\n      setMyPost = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      editMode = _useState10[0],\n      setEditMode = _useState10[1];\n\n  var _useState11 = useState(text),\n      _useState12 = _slicedToArray(_useState11, 2),\n      actualText = _useState12[0],\n      setActualText = _useState12[1];\n\n  var _useState13 = useState(false),\n      _useState14 = _slicedToArray(_useState13, 2),\n      isDisabled = _useState14[0],\n      setIsDisabled = _useState14[1];\n\n  var textAreaRef = useRef();\n  var effectTooltip = renderTooltip;\n\n  var _useState15 = useState(true),\n      _useState16 = _slicedToArray(_useState15, 2),\n      habilitar = _useState16[0],\n      setHabilitar = _useState16[1];\n\n  ReactModal.setAppElement(document.getElementById('root'));\n\n  var _useState17 = useState(repostCount),\n      _useState18 = _slicedToArray(_useState17, 2),\n      numberOfReposts = _useState18[0],\n      setNumberOfReposts = _useState18[1];\n\n  var _useState19 = useState(false),\n      _useState20 = _slicedToArray(_useState19, 2),\n      isOpen = _useState20[0],\n      setIsopen = _useState20[1];\n\n  var _useState21 = useState(false),\n      _useState22 = _slicedToArray(_useState21, 2),\n      openFrame = _useState22[0],\n      setOpenFrame = _useState22[1];\n\n  var customStyles = {\n    content: {\n      top: '50%',\n      left: '50%',\n      right: 'auto',\n      bottom: 'auto',\n      marginRight: '-50%',\n      transform: 'translate(-50%, -50%)',\n      background: '#333333',\n      borderRadius: '50px',\n      width: '600px',\n      height: '262px',\n      display: 'flex',\n      justifyContent: 'center'\n    }\n  };\n  var frameStyle = {\n    content: {\n      top: '50%',\n      left: '50%',\n      right: '50%',\n      bottom: 'auto',\n      transform: 'translate(-50%, -50%)',\n      background: '#333333',\n      borderRadius: '20px',\n      width: '60vw',\n      height: '90vh',\n      display: 'flex',\n      justifyContent: 'center'\n    },\n    overlay: {\n      zIndex: 3\n    }\n  };\n  useEffect(function () {\n    if (user.user.id === userInfo.id) {\n      setMyPost(true);\n    }\n\n    if (editMode) {\n      checkEditMode();\n    }\n\n    effectTooltip(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [editMode, effectTooltip]);\n\n  function isMypost() {\n    if (user.user.id === userInfo.id) {\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  function AbrirModal() {\n    setIsopen(true);\n  }\n\n  function FecharModal() {\n    setIsopen(false);\n    setOpenFrame(false);\n  }\n\n  function ApagarPost(id) {\n    setHabilitar(false);\n    deletePost(user.token, id).then(Sucesso).catch(Erro);\n  }\n\n  function Sucesso() {\n    setHabilitar(true);\n    setIsopen(false);\n    Swal.fire({\n      icon: \"sucess\",\n      title: \"Post deletado com sucesso!\"\n    });\n\n    if (location.pathname === \"/timeline\") {\n      getPosts(user.token).then(function (res) {\n        setPosts(res.data);\n      });\n    } else if (location.pathname === \"/my-posts\") {\n      getUserPosts({\n        token: user.token,\n        userId: user.user.id\n      }).then(function (res) {\n        setPosts(res.data);\n      });\n    }\n  }\n\n  function Erro() {\n    setHabilitar(true);\n    setIsopen(false);\n    Swal.fire({\n      icon: \"error\",\n      title: \"Ops...\",\n      text: \"Não foi possível excluir o post, tente novamente\"\n    });\n  }\n\n  function checkHashtag() {\n    var _this = this;\n\n    var textCheck = actualText.split(' ').map(function (word, index) {\n      if (word[0] === '#') {\n        return /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/hashtag/\".concat(word.substring(1), \"/posts\"),\n          children: /*#__PURE__*/_jsxDEV(HashtagCSS, {\n            children: [\" #\", word.substring(1)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 25\n          }, _this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 17\n        }, _this);\n      } else {\n        return \" \".concat(word);\n      }\n    });\n    return textCheck;\n  }\n\n  function renderTooltip() {\n    var usersLikes = [];\n\n    if (postLikes.length !== 0) {\n      usersLikes = postLikes.filter(function (item) {\n        if (item.userId === id) return false;\n        return true;\n      });\n    }\n\n    if (postLikes === likes) {\n      switch (postLikes.length) {\n        case 0:\n          setTooltipMessage('');\n          return;\n\n        case 1:\n          setTooltipMessage(\"\".concat(liked ? 'Você' : postLikes[0]['user.username'], \" curtiu\"));\n          break;\n\n        case 2:\n          setTooltipMessage(\"\".concat(liked ? 'Você e ' + usersLikes[0]['user.username'] : postLikes[0]['user.username'] + ' e ' + postLikes[1]['user.username'], \" curtiram\"));\n          break;\n\n        default:\n          setTooltipMessage(\"\".concat(liked ? 'Você, ' + usersLikes[0]['user.username'] : postLikes[0]['user.username'] + ', ' + postLikes[1]['user.username'], \" e outras \").concat(postLikes.length - 2, \" pessoas\"));\n      }\n    } else {\n      switch (postLikes.length) {\n        case 0:\n          setTooltipMessage('');\n          return;\n\n        case 1:\n          setTooltipMessage(\"\".concat(liked ? 'Você' : postLikes[0].username, \" curtiu\"));\n          break;\n\n        case 2:\n          setTooltipMessage(\"\".concat(liked ? 'Você e ' + usersLikes[0].username : postLikes[0].username + ' e ' + postLikes[1].username, \" curtiram\"));\n          break;\n\n        default:\n          setTooltipMessage(\"\".concat(liked ? 'Você, ' + usersLikes[0].username : postLikes[0].username + ', ' + postLikes[1].username, \" e outras \").concat(postLikes.length - 2, \" pessoas\"));\n      }\n    }\n  }\n\n  function changeLike() {\n    if (!liked) {\n      toggleLike({\n        token: user.token,\n        postId: id,\n        status: 'like'\n      }).then(function (r) {\n        setPostLikes(r.data.post.likes);\n        setLiked(true);\n      });\n    } else {\n      toggleLike({\n        token: user.token,\n        postId: id,\n        status: 'dislike'\n      }).then(function (r) {\n        setPostLikes(r.data.post.likes);\n        setLiked(false);\n      });\n    }\n  }\n\n  function checkEditMode() {\n    textAreaRef.current.focus();\n  }\n\n  function pressedKey(e) {\n    if (e.keyCode === 27) {\n      setEditMode(false);\n    }\n\n    if (e.keyCode === 13 && !e.shiftKey) {\n      e.preventDefault();\n      setIsDisabled(true);\n      var body = {\n        text: actualText\n      };\n      editPost({\n        token: user.token,\n        body: body,\n        postId: id\n      }).then(function (response) {\n        setIsDisabled(false);\n        setEditMode(false);\n        setActualText(response.data.post.text);\n      }).catch(function () {\n        Swal.fire({\n          icon: 'error',\n          title: 'Ops...',\n          text: 'Não foi possível salvar as alterações'\n        });\n        textAreaRef.current.focus();\n      });\n    }\n  }\n\n  return /*#__PURE__*/_jsxDEV(ContainerUserPost, {\n    id: \"main\",\n    style: {\n      marginTop: repostedBy ? '50px' : '0'\n    },\n    children: [repostedBy ? /*#__PURE__*/_jsxDEV(RepostedDiv, {\n      repostedBy: repostedBy,\n      id: user.user.id\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 27\n    }, this) : null, /*#__PURE__*/_jsxDEV(ReactModal, {\n      isOpen: isOpen,\n      onRequestClose: FecharModal,\n      style: customStyles,\n      contentLabel: \"Example Modal\",\n      children: /*#__PURE__*/_jsxDEV(BoxModal, {\n        children: [/*#__PURE__*/_jsxDEV(ModalTitle, {\n          children: habilitar ? 'Tem certeza que deseja excluir essa publicação' : 'Carregando...'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(ModalCancel, {\n            onClick: FecharModal,\n            state: habilitar,\n            children: \"N\\xE3o, voltar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(ModalConfirm, {\n            onClick: function onClick() {\n              return ApagarPost(id);\n            },\n            state: habilitar,\n            children: \"Sim, excluir\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 292,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(MainContent, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"photo-and-likes\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/user/\".concat(userId),\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: userInfo.avatar,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Interaction, {\n          \"data-tip\": tooltipMessage,\n          children: [liked ? /*#__PURE__*/_jsxDEV(AiFillHeart, {\n            style: {\n              color: '#ac0000'\n            },\n            onClick: changeLike\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 307,\n            columnNumber: 29\n          }, this) : /*#__PURE__*/_jsxDEV(AiOutlineHeart, {\n            onClick: changeLike\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [postLikes.length, \" \", postLikes.length <= 1 ? 'like' : 'likes']\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(ReactTooltip, {\n            place: \"bottom\",\n            type: \"light\",\n            backgroundColor: \"#FFFFFF30\",\n            textColor: \"#505050\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 317,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 305,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Interaction, {\n          children: [/*#__PURE__*/_jsxDEV(AiOutlineComment, {\n            style: {\n              marginTop: '18px'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"0 comments\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(RepostButton, {\n          postId: id,\n          token: user.token,\n          numberOfReposts: numberOfReposts,\n          setNumberOfReposts: setNumberOfReposts,\n          setPosts: setPosts,\n          posts: posts,\n          customStyles: customStyles\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(ReactModal, {\n        isOpen: openFrame,\n        onRequestClose: FecharModal,\n        style: frameStyle,\n        contentLabel: \"Example Modal\",\n        children: /*#__PURE__*/_jsxDEV(BoxFrame, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: function onClick() {\n                window.open(link, \"_blank\");\n              },\n              children: \"Open in new tab\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 348,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              onClick: FecharModal,\n              children: \"X\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 349,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n            title: \"Link\",\n            src: link,\n            width: \"100%\",\n            height: \"95%\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-post\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"top-post\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/user/\".concat(userId),\n            children: /*#__PURE__*/_jsxDEV(\"p\", {\n              children: /*#__PURE__*/_jsxDEV(\"strong\", {\n                children: userInfo.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 356,\n                columnNumber: 61\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 356,\n              columnNumber: 58\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 356,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"icons\",\n            children: [myPost ? /*#__PURE__*/_jsxDEV(TiPencil, {\n              onClick: function onClick() {\n                return setEditMode(!editMode);\n              },\n              style: {\n                cursor: 'pointer'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 43\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 124\n            }, this), isMypost() ? /*#__PURE__*/_jsxDEV(FiTrash, {\n              onClick: AbrirModal,\n              style: {\n                marginLeft: '10px'\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 47\n            }, this) : /*#__PURE__*/_jsxDEV(\"p\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 109\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 25\n        }, this), editMode ? /*#__PURE__*/_jsxDEV(EditBox, {\n          type: \"text\",\n          value: actualText,\n          onChange: function onChange(e) {\n            return setActualText(e.target.value);\n          },\n          ref: textAreaRef,\n          onKeyDown: function onKeyDown(e) {\n            return pressedKey(e);\n          },\n          disabled: isDisabled\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 29\n        }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: checkHashtag()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 29\n        }, this), checkYoutubeLink(link) ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"iframe\", {\n            src: \"https://www.youtube.com/embed/\".concat(getYouTubeID(link)),\n            title: \"video\",\n            width: \"100%\",\n            height: \"320px\",\n            allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\n            allowFullScreen: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            onClick: function onClick() {\n              window.open(link, \"_blank\");\n            },\n            style: {\n              cursor: 'pointer'\n            },\n            children: link\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 33\n          }, this)]\n        }, void 0, true) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"link-content\",\n          onClick: function onClick() {\n            return setOpenFrame(true);\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"link-description\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              children: linkTitle\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 381,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: linkDescription\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 382,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: link\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 383,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 380,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: linkImage ? linkImage : DefaultImg,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 379,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 354,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 284,\n    columnNumber: 9\n  }, this);\n}\n\n_s(UserPost, \"EJNSxw7peWxhZKFe2VnEl8Y5ASo=\", false, function () {\n  return [useLocation];\n});\n\n_c = UserPost;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserPost\");","map":{"version":3,"sources":["/home/cadu/Driven/Projetos/Projeto_11_Linkr/src/components/shared/UserPost.js"],"names":["Link","useLocation","FiTrash","AiOutlineHeart","AiFillHeart","AiOutlineComment","ContainerUserPost","BoxModal","ModalTitle","ModalConfirm","ModalCancel","HashtagCSS","Interaction","EditBox","MainContent","BoxFrame","ReactModal","deletePost","getPosts","getUserPosts","toggleLike","editPost","UserContext","ReactTooltip","TiPencil","useEffect","useContext","useRef","useState","RepostButton","RepostedDiv","Swal","getYouTubeID","DefaultImg","UserPost","props","location","post","id","linkTitle","text","linkImage","linkDescription","likes","repostedBy","repostCount","link","checkYoutubeLink","url","YoutubePattern","match","userInfo","userId","setPosts","posts","user","tooltipMessage","setTooltipMessage","some","like","liked","setLiked","postLikes","setPostLikes","myPost","setMyPost","editMode","setEditMode","actualText","setActualText","isDisabled","setIsDisabled","textAreaRef","effectTooltip","renderTooltip","habilitar","setHabilitar","setAppElement","document","getElementById","numberOfReposts","setNumberOfReposts","isOpen","setIsopen","openFrame","setOpenFrame","customStyles","content","top","left","right","bottom","marginRight","transform","background","borderRadius","width","height","display","justifyContent","frameStyle","overlay","zIndex","checkEditMode","isMypost","AbrirModal","FecharModal","ApagarPost","token","then","Sucesso","catch","Erro","fire","icon","title","pathname","res","data","checkHashtag","textCheck","split","map","word","index","substring","usersLikes","length","filter","item","username","changeLike","postId","status","r","current","focus","pressedKey","e","keyCode","shiftKey","preventDefault","body","response","marginTop","avatar","color","window","open","cursor","marginLeft","target","value"],"mappings":"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","sourcesContent":["import { Link, useLocation } from 'react-router-dom' \nimport { FiTrash } from \"react-icons/fi\";\nimport { AiOutlineHeart, AiFillHeart, AiOutlineComment } from 'react-icons/ai'\nimport {ContainerUserPost, BoxModal, ModalTitle, ModalConfirm, ModalCancel, HashtagCSS, Interaction, EditBox, MainContent, BoxFrame } from './ContainerUserPost'\nimport ReactModal from 'react-modal';\nimport { deletePost, getPosts, getUserPosts } from '../../service/API';\nimport { toggleLike, editPost } from '../../service/API';\nimport UserContext from '../../contexts/UserContext';\nimport ReactTooltip from 'react-tooltip';\nimport { TiPencil } from 'react-icons/ti';\nimport { useEffect, useContext, useRef, useState } from 'react';\nimport {RepostButton, RepostedDiv} from './Repost'\nimport Swal from 'sweetalert2';\nimport getYouTubeID from 'get-youtube-id';\nimport DefaultImg from '../../assets/default.jpg';\n\nexport default function UserPost(props) {\n    let location = useLocation();\n\n    const {\n        id,\n        linkTitle, \n        text, \n        linkImage, \n        linkDescription,  \n        likes,\n        repostedBy,\n        repostCount,\n    } = props.post;\n    let {\n        link,\n    } = props.post\n\n\n    function checkYoutubeLink(url){\n        let YoutubePattern = /^(?:https?:\\/\\/)?(?:www\\.)?(?:youtu\\.be\\/|youtube\\.com\\/(?:embed\\/|v\\/|watch\\?v=|watch\\?.+&v=))((\\w|-){11})(?:\\S+)?$/;\n         if(url.match(YoutubePattern)){\n             return true;\n         }\n         else {\n             return false;\n         }\n    }\n    const { userInfo, userId, setPosts, posts } = props;\n    const { user } = useContext(UserContext);\n    const [tooltipMessage, setTooltipMessage] = useState('')\n    const [liked, setLiked] = useState(likes.some(like => like.userId === user.user.id));\n    const [postLikes, setPostLikes] = useState(likes);\n    const [myPost, setMyPost] = useState(false);\n    const [editMode, setEditMode] = useState(false);\n    const [actualText, setActualText] = useState(text);\n    const [isDisabled, setIsDisabled] = useState(false);\n    const textAreaRef = useRef();\n    const effectTooltip = renderTooltip;\n    const [habilitar,setHabilitar] = useState(true);\n    ReactModal.setAppElement(document.getElementById('root'))\n    const [numberOfReposts, setNumberOfReposts] = useState(repostCount)\n    const [isOpen,setIsopen] = useState(false);\n    const [openFrame,setOpenFrame] = useState(false);\n    const customStyles = {\n        content: {\n          top: '50%',\n          left: '50%',\n          right: 'auto',\n          bottom: 'auto',\n          marginRight: '-50%',\n          transform: 'translate(-50%, -50%)',\n          background: '#333333',\n          borderRadius: '50px',\n          width: '600px',\n          height: '262px',\n          display:'flex',\n          justifyContent: 'center'\n        },\n      };\n  const frameStyle = {\n    content: {\n        top: '50%',\n        left: '50%',\n        right: '50%',\n        bottom: 'auto',\n        transform: 'translate(-50%, -50%)',\n        background: '#333333',\n        borderRadius: '20px',\n        width: '60vw',\n        height: '90vh',\n        display:'flex',\n        justifyContent: 'center',\n      },\n      overlay: {zIndex: 3},\n  }\n    useEffect(() => {\n        if(user.user.id === userInfo.id){\n                setMyPost(true);\n            }\n        if(editMode){\n            checkEditMode();\n        }\n        effectTooltip();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [editMode, effectTooltip]);\n    \n    function isMypost(){\n        if(user.user.id === userInfo.id){\n            return true;\n        }\n        else{\n            return false;\n        }\n    }\n       \n    function AbrirModal(){\n        setIsopen(true);\n    }\n\n    function FecharModal(){\n        setIsopen(false);\n        setOpenFrame(false);\n    }\n    function ApagarPost(id){\n        setHabilitar(false);\n        deletePost(user.token, id).then(Sucesso).catch(Erro);\n    }\n\n    function Sucesso(){\n        setHabilitar(true);\n        setIsopen(false);\n        Swal.fire({\n            icon: \"sucess\",\n            title: \"Post deletado com sucesso!\",\n        })\n        if(location.pathname === \"/timeline\"){\n            getPosts(user.token).then((res)=> {\n                setPosts(res.data);\n            })\n        }\n        else if (location.pathname === \"/my-posts\"){\n            getUserPosts({ token: user.token, userId: user.user.id})\n            .then((res) => {\n                setPosts(res.data);\n            })\n        }\n\n    }\n    function Erro(){\n        setHabilitar(true)\n        setIsopen(false);\n        Swal.fire({\n            icon: \"error\",\n            title: \"Ops...\",\n            text: \"Não foi possível excluir o post, tente novamente\"\n        })\n    }\n\n    function checkHashtag() {\n        const textCheck = actualText.split(' ').map((word, index) => {\n            if (word[0] === '#') {\n                return (\n                <Link \n                    key={index} \n                    to={`/hashtag/${word.substring(1)}/posts`\n                    }\n                    >\n                        <HashtagCSS> #{word.substring(1)}</HashtagCSS>\n                </Link>\n                )\n            } else {\n                return ` ${word}`\n            }\n        })\n        return textCheck;\n    }\n    \n    function renderTooltip() {\n        let usersLikes = []\n        if(postLikes.length !== 0) {\n            usersLikes = postLikes.filter(item => {\n                if(item.userId === id) return false;\n                return true;\n            }) \n        }\n        if (postLikes === likes) {\n            switch (postLikes.length) {\n                case 0: \n                    setTooltipMessage('');\n                    return;\n                case 1: \n                    setTooltipMessage(`${liked ? 'Você' : postLikes[0]['user.username']} curtiu`);\n                    break;\n                case 2:\n                    setTooltipMessage(\n                       `${liked ? 'Você e ' + usersLikes[0]['user.username'] \n                            : \n                            postLikes[0]['user.username'] + ' e ' + postLikes[1]['user.username'] \n                        } curtiram`\n                    );\n                    break;\n                default:\n                    setTooltipMessage(\n                        `${liked ? 'Você, ' + usersLikes[0]['user.username'] \n                        : \n                        postLikes[0]['user.username'] + ', ' + postLikes[1]['user.username'] \n                        } e outras ${postLikes.length - 2} pessoas`\n                    );   \n            }\n        } else {\n            switch (postLikes.length) {\n                case 0: \n                    setTooltipMessage('');\n                    return;\n                case 1: \n                    setTooltipMessage(`${liked ? 'Você' : postLikes[0].username} curtiu`);\n                    break;\n                case 2:\n                    setTooltipMessage(\n                       `${liked ? 'Você e ' + usersLikes[0].username \n                            : \n                            postLikes[0].username + ' e ' + postLikes[1].username \n                        } curtiram`\n                    );\n                    break;\n                default:\n                    setTooltipMessage(\n                        `${liked ? 'Você, ' + usersLikes[0].username \n                        : \n                        postLikes[0].username + ', ' + postLikes[1].username \n                        } e outras ${postLikes.length - 2} pessoas`\n                    );   \n            }\n        }\n    }\n\n    function changeLike() {\n        if(!liked) {\n            toggleLike({ token: user.token, postId: id, status: 'like' })\n            .then((r) => {\n                setPostLikes(r.data.post.likes);\n                setLiked(true); \n                });\n        } else {\n            toggleLike({ token: user.token, postId: id, status: 'dislike' })\n            .then((r) => {\n                setPostLikes(r.data.post.likes);\n                setLiked(false);\n                });\n        }\n    }\n\n    function checkEditMode(){\n       textAreaRef.current.focus();\n    }\n\n    function pressedKey(e){\n        if(e.keyCode === 27){\n            setEditMode(false);\n        }\n        if(e.keyCode === 13 && !e.shiftKey){\n            \n            e.preventDefault();\n\n            setIsDisabled(true);\n            \n            const body = {\n                text : actualText\n            };\n\n            editPost({ token: user.token, body: body, postId: id })\n                .then((response) => {\n                    setIsDisabled(false);\n                    setEditMode(false);\n                    setActualText(response.data.post.text)\n                })\n                .catch(() => {\n                    Swal.fire({\n                        icon: 'error',\n                        title: 'Ops...',\n                        text: 'Não foi possível salvar as alterações',\n                    })\n                    textAreaRef.current.focus();\n                })\n        }\n    }\n    return (\n        <ContainerUserPost id=\"main\" style={{marginTop: repostedBy ? '50px' : '0'}}>\n            {repostedBy ? <RepostedDiv repostedBy={repostedBy} id={user.user.id}/> : null}\n            <ReactModal\n                isOpen={isOpen}\n                onRequestClose={FecharModal}\n                style={customStyles}\n                contentLabel=\"Example Modal\"\n            >\n                    <BoxModal>\n                        <ModalTitle>{habilitar ? 'Tem certeza que deseja excluir essa publicação' : 'Carregando...' }</ModalTitle>\n                        <div>\n                            <ModalCancel onClick={FecharModal} state={habilitar}>Não, voltar</ModalCancel>\n                            <ModalConfirm onClick={()=>ApagarPost(id)}  state={habilitar}>Sim, excluir</ModalConfirm>\n                        </div>\n                    </BoxModal>\n            </ReactModal>\n            <MainContent>\n                <div className=\"photo-and-likes\">\n                    <Link to={`/user/${userId}`}>\n                        <img src={userInfo.avatar} alt=''/>\n                    </Link>\n                    <Interaction data-tip={tooltipMessage} >\n                        {liked ? \n                            <AiFillHeart\n                                style={{color: '#ac0000'}} \n                                onClick={changeLike} \n                            /> \n                            : \n                            <AiOutlineHeart \n                                onClick={changeLike}\n                            />\n                        }\n                        <p>{postLikes.length} {postLikes.length <= 1 ? 'like' : 'likes'}</p>\n                        <ReactTooltip \n                            place=\"bottom\"\n                            type=\"light\"\n                            backgroundColor=\"#FFFFFF30\"\n                            textColor=\"#505050\"\n                        />\n                    </Interaction>\n                    <Interaction >\n                            <AiOutlineComment \n                                style={{marginTop: '18px'}}\n                            />\n                        <p>0 comments</p>\n                    </Interaction>\n                    <RepostButton \n                        postId={id} \n                        token={user.token} \n                        numberOfReposts={numberOfReposts} \n                        setNumberOfReposts={setNumberOfReposts}\n                        setPosts={setPosts}\n                        posts={posts}\n                        customStyles={customStyles}\n                    />\n                </div>\n                <ReactModal\n                    isOpen={openFrame}\n                    onRequestClose={FecharModal}\n                    style={frameStyle}\n                    contentLabel=\"Example Modal\"\n                >\n                    <BoxFrame>\n                        <div>\n                            <button onClick={() =>{window.open(link, \"_blank\")}}>Open in new tab</button>\n                            <p onClick={FecharModal}>X</p>\n                        </div>\n                        <iframe title=\"Link\" src={link} width=\"100%\" height=\"95%\" />\n                    </BoxFrame> \n                </ReactModal>\n                    <div className=\"main-post\">\n                        <div className=\"top-post\">\n                            <Link to={`/user/${userId}`}><p><strong>{userInfo.username}</strong></p></Link>\n                                <div className=\"icons\">\n                                {myPost ? <TiPencil onClick={() => setEditMode(!editMode)} style={{cursor: 'pointer'}}/> : <p></p>}\n                                {isMypost() ? <FiTrash onClick={AbrirModal} style={{marginLeft:'10px'}}/> : <p></p>}\n                                </div>\n                        </div>\n                        {editMode ? \n                            <EditBox \n                                type=\"text\"\n                                value={actualText}\n                                onChange={(e) => setActualText(e.target.value)}\n                                ref={textAreaRef}\n                                onKeyDown={(e) => pressedKey(e)}\n                                disabled={isDisabled}/>\n                            :\n                            <p>{checkHashtag()}</p>}\n                            {checkYoutubeLink(link) ? \n                            <>\n                                <iframe src={`https://www.youtube.com/embed/${getYouTubeID(link)}`} title=\"video\" width=\"100%\" height=\"320px\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                                allowFullScreen/>\n                                <p onClick={() =>{window.open(link, \"_blank\")}} style={{cursor:'pointer'}}>{link}</p>\n                            </>\n                            :\n                        <div className=\"link-content\" onClick={()=>setOpenFrame(true)}>\n                            <div className=\"link-description\">\n                                <p>{linkTitle}</p>\n                                <p>{linkDescription}</p>\n                                <p>{link}</p>\n                            </div>\n                            <img src={linkImage ? linkImage : DefaultImg} alt='' />\n                        </div>}\n                    </div>\n            </MainContent>\n        </ContainerUserPost>\n    )\n\n}"]},"metadata":{},"sourceType":"module"}